{
  "type": "excalidraw",
  "version": 2,
  "source": "Claude Code",
  "elements": [
    {
      "id": "title",
      "type": "text",
      "x": 400,
      "y": 20,
      "width": 500,
      "height": 35,
      "text": "In-Season Variance Detection & Auto-Reforecast Flow",
      "fontSize": 28,
      "fontFamily": 1,
      "textAlign": "center",
      "strokeColor": "#1e1e1e"
    },
    {
      "id": "start",
      "type": "ellipse",
      "x": 500,
      "y": 80,
      "width": 140,
      "height": 50,
      "backgroundColor": "#a5d8ff",
      "strokeColor": "#1971c2"
    },
    {
      "id": "start_text",
      "type": "text",
      "x": 520,
      "y": 95,
      "width": 100,
      "height": 25,
      "text": "User Uploads\nActual Sales",
      "fontSize": 12,
      "textAlign": "center"
    },
    {
      "id": "arrow1",
      "type": "arrow",
      "x": 570,
      "y": 130,
      "width": 0,
      "height": 40,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "save_data",
      "type": "rectangle",
      "x": 480,
      "y": 180,
      "width": 180,
      "height": 60,
      "backgroundColor": "#b2f2bb",
      "strokeColor": "#2f9e44",
      "roundness": {"type": 3}
    },
    {
      "id": "save_data_text",
      "type": "text",
      "x": 490,
      "y": 195,
      "width": 160,
      "height": 30,
      "text": "Save Week Data\nUpdate session_state",
      "fontSize": 12,
      "textAlign": "center"
    },
    {
      "id": "arrow2",
      "type": "arrow",
      "x": 570,
      "y": 240,
      "width": 0,
      "height": 40,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "calc_variance",
      "type": "rectangle",
      "x": 480,
      "y": 290,
      "width": 180,
      "height": 60,
      "backgroundColor": "#ffec99",
      "strokeColor": "#f08c00",
      "roundness": {"type": 3}
    },
    {
      "id": "calc_variance_text",
      "type": "text",
      "x": 490,
      "y": 300,
      "width": 160,
      "height": 40,
      "text": "Calculate Variance\n(Actual - Forecast) / Forecast",
      "fontSize": 11,
      "textAlign": "center"
    },
    {
      "id": "arrow3",
      "type": "arrow",
      "x": 570,
      "y": 350,
      "width": 0,
      "height": 40,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "always_viz",
      "type": "rectangle",
      "x": 480,
      "y": 400,
      "width": 180,
      "height": 60,
      "backgroundColor": "#d0bfff",
      "strokeColor": "#7950f2",
      "roundness": {"type": 3}
    },
    {
      "id": "always_viz_text",
      "type": "text",
      "x": 490,
      "y": 410,
      "width": 160,
      "height": 40,
      "text": "üìä ALWAYS Show\nForecast vs Actual Chart",
      "fontSize": 11,
      "textAlign": "center"
    },
    {
      "id": "arrow4",
      "type": "arrow",
      "x": 570,
      "y": 460,
      "width": 0,
      "height": 40,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "decision",
      "type": "diamond",
      "x": 480,
      "y": 510,
      "width": 180,
      "height": 100,
      "backgroundColor": "#ffc9c9",
      "strokeColor": "#e03131"
    },
    {
      "id": "decision_text",
      "type": "text",
      "x": 510,
      "y": 545,
      "width": 120,
      "height": 30,
      "text": "Variance > 20%\nThreshold?",
      "fontSize": 12,
      "textAlign": "center"
    },
    {
      "id": "arrow_no",
      "type": "arrow",
      "x": 660,
      "y": 560,
      "width": 100,
      "height": 0,
      "strokeColor": "#2f9e44",
      "points": [[0, 0], [100, 0]]
    },
    {
      "id": "no_label",
      "type": "text",
      "x": 690,
      "y": 540,
      "width": 40,
      "height": 20,
      "text": "NO",
      "fontSize": 14,
      "strokeColor": "#2f9e44"
    },
    {
      "id": "ok_box",
      "type": "rectangle",
      "x": 770,
      "y": 530,
      "width": 150,
      "height": 60,
      "backgroundColor": "#b2f2bb",
      "strokeColor": "#2f9e44",
      "roundness": {"type": 3}
    },
    {
      "id": "ok_text",
      "type": "text",
      "x": 785,
      "y": 545,
      "width": 120,
      "height": 30,
      "text": "‚úÖ Show Success\n\"Variance OK\"",
      "fontSize": 11,
      "textAlign": "center"
    },
    {
      "id": "arrow_yes",
      "type": "arrow",
      "x": 570,
      "y": 610,
      "width": 0,
      "height": 50,
      "strokeColor": "#e03131",
      "points": [[0, 0], [0, 50]]
    },
    {
      "id": "yes_label",
      "type": "text",
      "x": 580,
      "y": 620,
      "width": 40,
      "height": 20,
      "text": "YES",
      "fontSize": 14,
      "strokeColor": "#e03131"
    },
    {
      "id": "high_var_alert",
      "type": "rectangle",
      "x": 480,
      "y": 670,
      "width": 180,
      "height": 50,
      "backgroundColor": "#ffc9c9",
      "strokeColor": "#e03131",
      "roundness": {"type": 3}
    },
    {
      "id": "high_var_text",
      "type": "text",
      "x": 490,
      "y": 680,
      "width": 160,
      "height": 30,
      "text": "‚ö†Ô∏è High Variance Alert\nShow Reforecast Button",
      "fontSize": 11,
      "textAlign": "center"
    },
    {
      "id": "arrow6",
      "type": "arrow",
      "x": 570,
      "y": 720,
      "width": 0,
      "height": 40,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "user_click",
      "type": "diamond",
      "x": 490,
      "y": 770,
      "width": 160,
      "height": 80,
      "backgroundColor": "#a5d8ff",
      "strokeColor": "#1971c2"
    },
    {
      "id": "user_click_text",
      "type": "text",
      "x": 515,
      "y": 795,
      "width": 110,
      "height": 30,
      "text": "User Clicks\nReforecast?",
      "fontSize": 11,
      "textAlign": "center"
    },
    {
      "id": "arrow7",
      "type": "arrow",
      "x": 570,
      "y": 850,
      "width": 0,
      "height": 40,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "reforecast_box",
      "type": "rectangle",
      "x": 440,
      "y": 900,
      "width": 260,
      "height": 120,
      "backgroundColor": "#ffe066",
      "strokeColor": "#f08c00",
      "roundness": {"type": 3}
    },
    {
      "id": "reforecast_title",
      "type": "text",
      "x": 480,
      "y": 910,
      "width": 180,
      "height": 20,
      "text": "üîÑ Direct Reforecast",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "center"
    },
    {
      "id": "reforecast_steps",
      "type": "text",
      "x": 455,
      "y": 935,
      "width": 230,
      "height": 75,
      "text": "1. Load historical data\n2. aggregate_to_weekly()\n3. EnsembleForecaster.train()\n4. Generate new forecast\n5. Return ForecastResult",
      "fontSize": 10,
      "textAlign": "left"
    },
    {
      "id": "arrow8",
      "type": "arrow",
      "x": 570,
      "y": 1020,
      "width": 0,
      "height": 40,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 40]]
    },
    {
      "id": "viz_result",
      "type": "rectangle",
      "x": 450,
      "y": 1070,
      "width": 240,
      "height": 80,
      "backgroundColor": "#d0bfff",
      "strokeColor": "#7950f2",
      "roundness": {"type": 3}
    },
    {
      "id": "viz_result_text",
      "type": "text",
      "x": 465,
      "y": 1085,
      "width": 210,
      "height": 50,
      "text": "üìä Visualize Results\n‚Ä¢ Original vs Actual vs New\n‚Ä¢ Metrics comparison\n‚Ä¢ Model details",
      "fontSize": 11,
      "textAlign": "left"
    },
    {
      "id": "end",
      "type": "ellipse",
      "x": 520,
      "y": 1170,
      "width": 100,
      "height": 45,
      "backgroundColor": "#a5d8ff",
      "strokeColor": "#1971c2"
    },
    {
      "id": "end_text",
      "type": "text",
      "x": 545,
      "y": 1183,
      "width": 50,
      "height": 20,
      "text": "Done",
      "fontSize": 14,
      "textAlign": "center"
    },
    {
      "id": "arrow9",
      "type": "arrow",
      "x": 570,
      "y": 1150,
      "width": 0,
      "height": 20,
      "strokeColor": "#1971c2",
      "points": [[0, 0], [0, 20]]
    },
    {
      "id": "legend_box",
      "type": "rectangle",
      "x": 100,
      "y": 200,
      "width": 200,
      "height": 280,
      "backgroundColor": "#f8f9fa",
      "strokeColor": "#868e96",
      "roundness": {"type": 3}
    },
    {
      "id": "legend_title",
      "type": "text",
      "x": 150,
      "y": 210,
      "width": 100,
      "height": 25,
      "text": "Legend",
      "fontSize": 16,
      "fontFamily": 1,
      "textAlign": "center"
    },
    {
      "id": "legend_user",
      "type": "rectangle",
      "x": 115,
      "y": 245,
      "width": 25,
      "height": 20,
      "backgroundColor": "#a5d8ff",
      "strokeColor": "#1971c2"
    },
    {
      "id": "legend_user_text",
      "type": "text",
      "x": 150,
      "y": 248,
      "width": 140,
      "height": 15,
      "text": "User Action",
      "fontSize": 12
    },
    {
      "id": "legend_process",
      "type": "rectangle",
      "x": 115,
      "y": 280,
      "width": 25,
      "height": 20,
      "backgroundColor": "#b2f2bb",
      "strokeColor": "#2f9e44"
    },
    {
      "id": "legend_process_text",
      "type": "text",
      "x": 150,
      "y": 283,
      "width": 140,
      "height": 15,
      "text": "Data Processing",
      "fontSize": 12
    },
    {
      "id": "legend_calc",
      "type": "rectangle",
      "x": 115,
      "y": 315,
      "width": 25,
      "height": 20,
      "backgroundColor": "#ffec99",
      "strokeColor": "#f08c00"
    },
    {
      "id": "legend_calc_text",
      "type": "text",
      "x": 150,
      "y": 318,
      "width": 140,
      "height": 15,
      "text": "Calculation",
      "fontSize": 12
    },
    {
      "id": "legend_viz",
      "type": "rectangle",
      "x": 115,
      "y": 350,
      "width": 25,
      "height": 20,
      "backgroundColor": "#d0bfff",
      "strokeColor": "#7950f2"
    },
    {
      "id": "legend_viz_text",
      "type": "text",
      "x": 150,
      "y": 353,
      "width": 140,
      "height": 15,
      "text": "Visualization",
      "fontSize": 12
    },
    {
      "id": "legend_alert",
      "type": "rectangle",
      "x": 115,
      "y": 385,
      "width": 25,
      "height": 20,
      "backgroundColor": "#ffc9c9",
      "strokeColor": "#e03131"
    },
    {
      "id": "legend_alert_text",
      "type": "text",
      "x": 150,
      "y": 388,
      "width": 140,
      "height": 15,
      "text": "Alert/Decision",
      "fontSize": 12
    },
    {
      "id": "legend_model",
      "type": "rectangle",
      "x": 115,
      "y": 420,
      "width": 25,
      "height": 20,
      "backgroundColor": "#ffe066",
      "strokeColor": "#f08c00"
    },
    {
      "id": "legend_model_text",
      "type": "text",
      "x": 150,
      "y": 423,
      "width": 140,
      "height": 15,
      "text": "ML Model (Prophet+ARIMA)",
      "fontSize": 11
    },
    {
      "id": "data_flow_box",
      "type": "rectangle",
      "x": 780,
      "y": 200,
      "width": 220,
      "height": 300,
      "backgroundColor": "#f8f9fa",
      "strokeColor": "#868e96",
      "roundness": {"type": 3}
    },
    {
      "id": "data_flow_title",
      "type": "text",
      "x": 830,
      "y": 210,
      "width": 120,
      "height": 25,
      "text": "Data Flow",
      "fontSize": 16,
      "fontFamily": 1,
      "textAlign": "center"
    },
    {
      "id": "data_flow_content",
      "type": "text",
      "x": 795,
      "y": 245,
      "width": 190,
      "height": 240,
      "text": "üìÅ Input:\n‚Ä¢ actuals_week_XX.csv\n‚Ä¢ quantity_sold per store\n\nüìä Historical Data:\n‚Ä¢ 1096 days ‚Üí 158 weeks\n‚Ä¢ aggregate_to_weekly()\n\nüîÆ Forecast Output:\n‚Ä¢ 12 weekly predictions\n‚Ä¢ Confidence score\n‚Ä¢ Upper/lower bounds\n\nüìà Visualization:\n‚Ä¢ Plotly line charts\n‚Ä¢ Variance shading\n‚Ä¢ 3-way comparison",
      "fontSize": 11,
      "textAlign": "left"
    },
    {
      "id": "key_fix_box",
      "type": "rectangle",
      "x": 100,
      "y": 520,
      "width": 200,
      "height": 150,
      "backgroundColor": "#fff3bf",
      "strokeColor": "#f08c00",
      "roundness": {"type": 3}
    },
    {
      "id": "key_fix_title",
      "type": "text",
      "x": 140,
      "y": 530,
      "width": 120,
      "height": 25,
      "text": "üîß Key Fix",
      "fontSize": 14,
      "fontFamily": 1,
      "textAlign": "center"
    },
    {
      "id": "key_fix_content",
      "type": "text",
      "x": 115,
      "y": 560,
      "width": 170,
      "height": 100,
      "text": "Before: Daily data fed\nto weekly forecast\n‚Üí 363% variance!\n\nAfter: aggregate_to_weekly()\nconverts daily ‚Üí weekly\n‚Üí ~10-25% variance ‚úì",
      "fontSize": 11,
      "textAlign": "left"
    }
  ],
  "appState": {
    "gridSize": null,
    "viewBackgroundColor": "#ffffff"
  }
}
